# Watchdog

Данное приложение позволят мониторить состояние других демонов и перезапускать их при отключении с заданным таймаутом.

## Сборка

Для сборки используется Cmake. Для сборки проекта воспользуйтесь командой:

```shell
mkdir cmake-build && cd cmake-build && cmake .. && make
```

Исполняемый файл - `bin/watchdog`.

## Поддерживаемый функционал
Приложение `watchdog` принимает на вход путь до приложения с аргументами, осуществляет его запуск и далее в интервале 5 секунд контролирует состояние.
В случае если процесс будет завершен из-вне то он будет перезапущен.

Поддержан функционал по принудительной остановки или запуска процесса по сигналу SIGUSR1. При получении сигнала происходит остановка процесса, повторное получение сигнала запустит процесс заново.

Так же поддержаны сигналы SIGTERM, SIGQUIT и SIGINT при получении которых происходит остановка подконтрольного процесса и завершение `watchdog`.

## Пример работы 

```shell
# Запуск watchdog с тестовым демоном a.out
> ./bin/watchdog start ../../a.out     
Process ../../a.out (PID 40331) start successfully!
Timer create success!
Signal fd create success!
Poll create success!
Start polling process ../../a.out (PID 40331).

# Убиваем процесс a.out
Process ../../a.out is not alive. Try restart.
Process ../../a.out (PID 40408) start successfully!
# Процесс успешно был перезапущен успешно

# Завершаем  watchdog нажимая crtl + c
Catch signal Interrupt
Process 40408 stop successfully!
Finish polling.
```

## ТЗ
Написать приложение – watchdog для других приложений:

* Запуск произвольного ПО через watchdog
* Контроль состояния процесса, при необходимости – перезапуск с таймаутом 5 сек
* Предпочтительно использовать timerfd и signalfd
* Язык – С, использовать Linux api
* Предусмотреть возможность остановки процесса
* Приложение должно стабильно работать с lighttpd
* Пример запуска watchdog start lighttpd

 